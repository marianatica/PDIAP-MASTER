<md-toolbar role="toolbar" class="toolbar-admin">
  <div class="md-toolbar-tools">
    <md-button class="md-icon-button" ng-click="toggleSidenav('left')" hide-gt-sm aria-label="Menu">
      <md-icon md-svg-src="menu" style="color:#225024;vertical-align:baseline;"></md-icon>
    </md-button>
    <h4 class="md-title" style="color:#225024;margin:0!important;">Avaliadores | Inscrição</h4>
  </div>

      <md-toolbar role="toolbar" class="toolbar-admin" style="box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)">
      <div class="md-toolbar-tools">

	<div style="width:85px;">
          <md-select data-ng-model="ano" placeholder="Ano" style="width:100%!important;font-size:17px;">
            <md-optgroup label="Ano:">
              <md-option ng-value="years" data-ng-selected="true" data-ng-repeat="years in year" data-ng-click="recarregar()">{{years}}</md-option>
            </md-optgroup>
          </md-select>
        </div>	

      </div>
      </md-toolbar>

</md-toolbar>

<span layout="column" layout-align="center center" class="loader" us-spinner>
  <div layout="row" layout-sm="column" layout-align="space-around">
    <md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular>
  </div>
</span>
<div layout="row" layout-fill data-ng-cloak class="admin-page alert-theme" id="popupContainer">

  <section layout="column" role="main" flex>

    <md-content>
      <div layout="column" layout-align="center center" style="background:rgba(128,128,128,0.07);padding:30px;">
        <h3 style="text-align:center;border-top:1px solid grey;margin:30px 0 -5px 0;font-size:15px;width:100%;">
          <span style="text-transform:uppercase;padding:5px 10px;position:relative;background:#f7f7f7;bottom:10px;letter-spacing:1px;">Novo Avaliador</span>
        </h3>
        <form name="avaliadoresForm" novalidate>
          <div layout-gt-xs="row">
            <md-input-container class="md-block" flex-gt-xs>
              <label>Nome completo*</label>
              <input type="text" name="nome" data-ng-model="avaliador.nome" required />
              <div class="md-errors-spacer">
                <div data-ng-if="avaliadoresForm.nome.$dirty">
                  <div class="message-error" data-ng-if="avaliadoresForm.nome.$error.required">Obrigatório.</div>
                </div>
              </div>
            </md-input-container>
            <div flex="5" hide-xs></div>
            <md-input-container class="md-block" flex-gt-xs>
              <label>E-mail*</label>
              <input type="email" name="email" data-ng-model="avaliador.email" required data-ng-pattern="/^.+@.+\..+$/" />
              <div class="md-errors-spacer">
                <div data-ng-show="avaliadoresForm.email.$dirty">
                  <div class="message-error" data-ng-show="avaliadoresForm.email.$error.required">Obrigatório.</div>
                  <div class="message-error" data-ng-show="avaliadoresForm.email.$error.pattern && avaliadoresForm.email.$touched">Email inválido.</div>
                </div>
              </div>
            </md-input-container>
          </div>
          <div layout-gt-xs="row">
            <md-input-container class="md-block" flex-gt-xs>
              <label>RG</label>
              <input type="text" name="rg" data-ng-model="avaliador.rg" minlength="10" maxlength="10" rg-mask/>
              <div class="md-errors-spacer">
                <div data-ng-show="avaliadoresForm.rg.$dirty">
                  <!-- <div class="message-error" data-ng-show="avaliadoresForm.rg.$error.required">Obrigatório.</div> -->
                  <div class="message-error" data-ng-show="avaliadoresForm.rg.$error.minlength && avaliadoresForm.rg.$touched">RG inválido.</div>
                </div>
              </div>
            </md-input-container>
            <div flex="5" hide-xs></div>
            <md-input-container class="md-block" flex-gt-xs>
              <label>Dt. nascimento</label>
              <input type="text" name="dtNascimento" data-ng-model="avaliador.dtNascimento" minlength="8" maxlength="10" nasc-mask/>
              <div class="md-errors-spacer">
                <div data-ng-show="avaliadoresForm.dtNascimento.$dirty">
                  <!-- <div class="message-error" data-ng-show="avaliadoresForm.dtNascimento.$error.required">Obrigatório.</div> -->
                  <div class="message-error" data-ng-show="avaliadoresForm.dtNascimento.$error.minlength && avaliadoresForm.dtNascimento.$touched">Data inválida.</div>
                </div>
              </div>
            </md-input-container>
            <div flex="5" hide-xs></div>
            <md-input-container class="md-block" flex-gt-xs>
              <label>Telefone</label>
              <input type="text" name="telefone" data-ng-model="avaliador.telefone" minlength="14" maxlength="14" fone-mask/>
              <div class="md-errors-spacer">
                <div data-ng-show="avaliadoresForm.telefone.$dirty">
                  <!-- <div class="message-error" data-ng-show="avaliadoresForm.telefone.$error.required">Obrigatório.</div> -->
                  <div class="message-error" data-ng-show="avaliadoresForm.telefone.$error.minlength && avaliadoresForm.telefone.$touched">Telefone inválido.</div>
                </div>
              </div>
            </md-input-container>
          </div>
          <div layout-gt-xs="row">
            <md-input-container class="md-block" flex-gt-xs>
              <label>CPF*</label>
              <input type="text" name="cpf" data-ng-model="avaliador.cpf" required minlength="14" maxlength="14" cpf-mask/>
              <div class="md-errors-spacer">
                <div data-ng-show="avaliadoresForm.cpf.$dirty">
                  <div class="message-error" data-ng-show="avaliadoresForm.cpf.$error.required">Obrigatório.</div>
                  <div class="message-error" data-ng-show="avaliadoresForm.cpf.$error.minlength && avaliadoresForm.cpf.$touched">CPF inválido.</div>
                </div>
              </div>
            </md-input-container>
            <div flex="5" hide-xs></div>
            <md-input-container class="md-block selectCustom1" flex-gt-xs>
              <label>Nível Acadêmico</label>
              <md-select name="nivelAcademico" data-ng-model="avaliador.nivelAcademico" style="width:100%!important;">
                <md-option value="Graduação">Graduação</md-option>
                <md-option value="Especialização">Especialização</md-option>
                <md-option value="Mestrado">Mestrado</md-option>
                <md-option value="Doutorado">Doutorado</md-option>
              </md-select>
              <div class="md-errors-spacer">
                <!-- <div data-ng-if="avaliadoresForm.nivelAcademico.$touched">
                  <div class="message-error" data-ng-if="avaliadoresForm.nivelAcademico.$error.required">Selecione uma opção.</div>
                </div> -->
              </div>
            </md-input-container>	    
          </div>
	  <md-checkbox aria-label="Check" name="avaliacao" data-ng-model="avaliador.avaliacao">Presença</md-checkbox>
          <p style="text-align:left;font-size:13px;">* Obrigatório</p>

          <!-- Finalizar inscrição -->
          <div class="finalizar" layout="row" layout-align="center center" data-ng-if="!spinnerActive" style="margin:40px 0 0 0;">
            <md-button class="md-raised md-primary teal lighten-1" data-ng-disabled="!avaliadoresForm.$valid" data-ng-click="registrarAvaliador(avaliador)">
              <md-icon md-svg-icon="check" ng-style="{width:'20px', height:'20px', color:'rgba(255,255,255,0.87) !important'}"></md-icon> Finalizar
            </md-button>
          </div>
          <span us-spinner>
            <div layout="row" layout-sm="column" layout-align="space-around">
              <md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular>
            </div>
          </span>
        </form>
      </div>
      <div style="background:rgba(128,128,128,0.07);padding:30px 30px 15px 30px;">
        <h3 style="text-align:center;border-top:1px solid grey;margin:0 0 -5px 0;font-size:15px;width:100%;">
          <span style="text-transform:uppercase;padding:5px 10px;position:relative;background:#f7f7f7;bottom:10px;letter-spacing:1px;">Avaliadores</span>
        </h3>
      </div>
      <md-list flex style="margin-bottom:50px;" data-ng-init="ordenacao = ['nome','cpf']">
        <md-divider></md-divider>
        <div data-ng-if="avaliadores.length === 0" flex style="text-align:center;padding-top:20px;color:rgba(0,0,0,0.4);">
          <p>Nenhum avaliador cadastrado :(</p>
        </div>
        <md-list-item class="md-3-line" data-ng-repeat="ava in avaliadores | orderBy:ordenacao track by ava._id"
        style="padding:0 45px;">
          <div layout flex="5" layout-align="center center" style="align-self:center;">
            <div style="width:15px;height:15px;border-radius:50%;"
            data-ng-class="{azul:ava.tipo == 'Semana Acadêmica',
            roxo:ava.tipo == 'Seminário Saberes Docentes',
            green1:ava.tipo == 'Oficina'}">
            </div>
          </div>
          <div class="md-list-item-text" style="margin-right:5px;text-align:left;">
            <h3>{{::ava.nome}}</h3>
            <p>CPF: {{::ava.cpf}}</p>
          </div>
          <div class="md-list-item-text" flex="15">
            <md-checkbox aria-label="Check" data-ng-model="ava.avaliacao" data-ng-click="contador(ava.avaliacao,ava._id)">Presença</md-checkbox>
          </div>
          <div flex="15" style="display:flex;align-self:center;justify-content:center;">
            <md-button no-ink class="md-raised red md-whiteframe-1dp" style="border-radius:70px;min-height:30px;line-height:30px;box-shadow:none!important;" aria-label="Remover avaliador" ng-click="removerAvaliador($event,ava._id,ava.nome)">
              <md-icon md-svg-icon="close" ng-style="{width:'18px', height:'18px', color:'rgba(255,255,255,0.87)', 'margin-bottom':'3px'}"></md-icon>
              <span style="vertical-align:middle;font-size:13px;color:rgba(255,255,255,0.87);">Remover</span>
            </md-button>
          </div>
        <md-divider></md-divider>
        </md-list-item>
      </md-list>
</md-content>
	<div layout="row" class="footer-admin" style="position:fixed;width:calc(100% - 260px);height:50px;background:#424242;bottom:0!important;color:#f5f5f5;" align="center">
	    <div flex="50">
	      <p>Selecionados: {{count}}</p>
	    </div>
	    <div flex="50">
	      <md-button flex="50" aria-label="Salvar Presenca" class="md-raised md-primary white green darken-1 btnCustom1" data-ng-disabled="count == 0" data-ng-click="update()">
		<span>Salvar Presença</span>
	      </md-button>
	    </div>
	</div>
</section>
</div>
